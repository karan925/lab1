version: '3.8'

services: 
  # mysqldb:
  #   image: mysql
  #   restart: always
  #   env_file: ./.env
  #   environment:
  #     MYSQL_ROOT_PASSWORD: $MYSQL_ROOT_PASSWORD
  #     MYSQL_DATABASE: $MYSQL_DATABASE
  #   ports:
  #     - "3306:3306"
  #   volumes: 
  #     - db-config:/etc/mysql
  #     - db-data:/var/lib/mysql
  #     - ./db/backup/files/:/data_backup/data

  api:
    build:
      context: .
      dockerfile: ./api/Dockerfile
    image: node-mysql-app
    # depends_on:
    #   - mysqldb
    ports:
      - "3001:3001"
    # volumes:
    #   - ./api:/usr/src/app
    networks:
      - shared-network

  client:
    build:
      context: .
      dockerfile: ./client/Dockerfile
    image: node-mysql-app
    depends_on:
      - api
    ports:
      - "3000:3000"
    # volumes:
    #   - ./client:/usr/src/app
    networks:
      - shared-network

networks:
  shared-network:

# volumes: 
#   db-config:
#   db-data: